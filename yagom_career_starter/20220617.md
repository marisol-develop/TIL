CoreGraphicsë¥¼ í™œìš©í•´ì„œ ì•„ë˜ì²˜ëŸ¼ ë²„íŠ¼ì— ê·¸ë¦¼ì„ ê·¸ë ¤ë³´ì•˜ë‹¤

1ï¸âƒ£ Normal State 
<img src="https://velog.velcdn.com/images/marisol/post/cba9c16b-8ef2-44f7-81f7-688748bee397/image.png" width="250" height="350"/>
2ï¸âƒ£ Selected State
<img src="https://velog.velcdn.com/images/marisol/post/a4a372fc-3ce2-474b-8b4b-1c150dc6d08d/image.png" width="250" height="350"/>
---

## ğŸ¨ Core Graphics

Core GraphicsëŠ” ì„ , ë„í˜• ë“±ì„ ê¸°ë°˜ìœ¼ë¡œ ê·¸ë¦¼ì„ ê·¸ë¦¬ëŠ” 2ì°¨ì› ë“œë¡œì‰ íˆ´ì´ë‹¤. 
Core GraphicsëŠ” Quartzë¼ëŠ” ê·¸ë˜í”½ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì•ˆì— í¬í•¨ë˜ì–´ ìˆìœ¼ë©°, QuartzëŠ” Core Graphicsì™€ Core Animationìœ¼ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤ê³  í•œë‹¤.

## âœï¸ Core Graphicsë¡œ ë²„íŠ¼ ê·¸ë ¤ë³´ê¸°

### ğŸ“Œ 1. ì»¤ìŠ¤í…€ ë²„íŠ¼ ì •ì˜
- PlusButtonì´ë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ì •ì˜í•˜ê³ , UIButtonì„ ìƒì†ë°›ëŠ”ë‹¤

### ğŸ“Œ 2. draw ë©”ì„œë“œ ì¬ì •ì˜
1) ë¨¼ì € ë„í™”ì§€ì¸ contextë¥¼ ê°€ì ¸ì˜¨ë‹¤
2) ë¼ì¸ ë‘ê»˜ì™€ ìƒ‰ìƒì„ ì„¤ì •í•´ì¤€ë‹¤
3) contextì— ì›ì„ ì¶”ê°€í•´ì¤€ë‹¤
4) isSelected ìƒíƒœì¼ ê²½ìš°, ì› ë‚´ë¶€ì— +ë¥¼ ê·¸ë ¤ì¤€ë‹¤
5) í˜„ì¬ê¹Œì§€ì˜ pathë¥¼ ê·¸ë ¤ì¤€ë‹¤

```swift
override func draw(_ rect: CGRect) {
    // 1. contextë¥¼ ê°€ì ¸ì˜¨ë‹¤
    guard let context = UIGraphicsGetCurrentContext() else {
    return
    }
    
    let width = bounds.width
    let height = bounds.height
    
    // 2. ë¼ì¸ ë‘ê»˜ì™€ ìƒ‰ìƒì„ ì„¤ì •í•´ì¤€ë‹¤
    context.beginPath()
    context.setLineWidth(lineWidth)
    context.setStrokeColor(color.cgColor)
    
    // 3. contextì— ì›ì„ ì¶”ê°€í•´ì¤€ë‹¤
    let circle = bounds.insetBy(dx: width * 0.05, dy: height * 0.05)
    context.addEllipse(in: circle)
    
    // 4. isSelected ìƒíƒœì¼ ê²½ìš°, ì› ë‚´ë¶€ì— +ë¥¼ ê·¸ë ¤ì¤€ë‹¤
    if isSelected {
        context.setLineCap(.round) // ì„  ëì„ ë‘¥ê¸€ê²Œ í•´ì¤€ë‹¤
        context.move(to: CGPoint(x: width * 0.2, y: height * 0.5)) // í•´ë‹¹ ì¢Œí‘œë¡œ ì´ë™
        context.addLine(to: CGPoint(x: width * 0.8, y: height * 0.5)) // ìœ„ ì¢Œí‘œì—ì„œ í•´ë‹¹ ì¢Œí‘œê¹Œì§€ ì„  ì¶”ê°€
        context.move(to: CGPOint(x: width * 0.5, y: height * 0.2))
        context.addLine(to: CGPoint(x: width * 0.5, y: height * 0.8))
    }
    
    // 5. í˜„ì¬ê¹Œì§€ì˜ pathë¥¼ ê·¸ë ¤ì¤€ë‹¤
    context.drawPath(using: .stroke)
    context.closePath()
}
```

3ë²ˆì—ì„œ ì›ì„ ì¶”ê°€í•  ë•Œ, `addEllipse()`ê°€ ìˆê³ , `strokeEllipse()`ê°€ ìˆê³ , ë‘˜ë‹¤ ì›ì´ ì˜ ê·¸ë ¤ì ¸ì„œ ê³µì‹ë¬¸ì„œë¥¼ ì°¾ì•„ë³´ë‹ˆ 

addEllipse: Adds an ellipse that fits inside the specified rectangle
strokeEllipse: Strokes an ellipse that fits inside the specified rectangle

ìƒë‹¹íˆ ë¹„ìŠ·í•œ ëŠë‚Œ...
í•˜ì§€ë§Œ ì—¬ëŸ¬ ê·¸ë¦¼ì„ ê²¹ì¹  ë•Œ ì°¨ì´ê°€ ìƒê¸°ëŠ”ë°
add -> add -> add í•˜ê³  drawPath()ë¥¼ í•˜ë©´ í•œë²ˆì— ê·¸ë ¤ì§€ì§€ë§Œ,
add -> add -> add -> stroke -> drawPath()í•˜ë©´ strokeí•œ ê·¸ë¦¼ì´ ë¨¼ì € ì•„ë˜ì— ê¹”ë¦¬ê²Œ ëœë‹¤ê³  í•œë‹¤.

### ğŸ“Œ 3. @IBDesignable ì‚¬ìš©í•´ë³´ê¸°

ë¼ì´ë¸Œ ë Œë”ë§ì„ ì‚¬ìš©í•˜ë©´ ë·°ê°€ ìì‹ ì˜ draw ë©”ì„œë“œë¥¼ ì‹¤í–‰í•´ì„œ ìŠ¤í† ë¦¬ë³´ë“œì—ì„œ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

1ë²ˆì—ì„œ ì„ ì–¸í•œ ì»¤ìŠ¤í…€ PlusButton ë°”ë¡œ ì•ì— @IBDesignableë§Œ ì¶”ê°€í•˜ë©´ ëœë‹¤.

ê·¸ëŸ¬ê³ ë‚˜ë‹ˆ ë Œë”ë§í•  ìˆ˜ ì—†ë‹¤ëŠ” ì˜¤ë¥˜ê°€ ë–´ì—ˆëŠ”ë°.. Xcode ì¢…ë£Œí•˜ê³  ë‹¤ì‹œ ì‹¤í–‰í•˜ë‹ˆ í•´ê²°ë˜ì—ˆë‹¤..ğŸ™ƒ

### ğŸ“Œ 4. @IBInspectable ì‚¬ìš©í•´ë³´ê¸°

@IBInspectableë¥¼ í†µí•´ Interface Builderì—ì„œ ì½ì„ ìˆ˜ ìˆëŠ” í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.
ì½”ë“œ ëŒ€ì‹  ìŠ¤í† ë¦¬ë³´ë“œì—ì„œ í•´ë‹¹ í”„ë¡œí¼í‹°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

ë¼ì¸ì˜ ìƒ‰ê³¼ ë„ˆë¹„ë¥¼ ìŠ¤í† ë¦¬ë³´ë“œì—ì„œ ì„¤ì •í•˜ê³  ì‹¶ìœ¼ë©´ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¥¼ ì¶”ê°€í•˜ë©´ ëœë‹¤
```swift
@IBInspectable var color: UIColor = UIColor.systemGreen
@IBInspectable var lineWidth: CGFloat = 10
```

ì´ëŸ¬ë©´ ì´ˆê¸°ê°’ì€ ì´ˆë¡ìƒ‰, ë„ˆë¹„ 10ìœ¼ë¡œ ì„¤ì •ë˜ì§€ë§Œ ìŠ¤í† ë¦¬ë³´ë“œì—ì„œ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤.
![](https://velog.velcdn.com/images/marisol/post/74558bc7-c4c5-4cbb-9d63-fbb486aad1c4/image.png)

ê·¸ë¦¬ê³  draw ë©”ì„œë“œ ë‚´ì—ì„œ ìƒ‰ê³¼ ë„ˆë¹„ë¥¼ ì…‹íŒ…í•´ì£¼ëŠ” ì½”ë“œì— ìœ„ì— ì„ ì–¸í•´ì¤€ colorê³¼ lineWidthë¡œ ë°”ê¿”ì•¼ í•œë‹¤.

### ğŸ“Œ 5. ViewControllerì—ì„œ ë²„íŠ¼ Action ì¶”ê°€

isSelected ìƒíƒœì—ì„œ tapëœ ê²½ìš° -> !isSelectedë¡œ ë³€ê²½í•´ì£¼ëŠ” ì½”ë“œ ì¶”ê°€
```swift
@IBAction func buttonIsTapped(_ sender: PlusButton) {
    sender.isSelected = !sender.isSelected
}
```

ê·¸ëŸ¬ë©´ ì•„ë˜ì™€ ê°™ì´ ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œë§Œ +ê°€ ìƒê¸´ë‹¤!

![](https://velog.velcdn.com/images/marisol/post/95feff08-d15b-45b9-8829-8eb741185b12/image.gif)


---
ì°¸ê³ ìë£Œ
- https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html
- https://devmjun.github.io/archive/CoreGraphics-1#section-id-354
